<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="./index.js"></script>
</head>

<body>
  <script>
    function LinkedList() {
      /**
       * 单向链表节点的构造函数
       * 
       * @param {any} element 要传入链表的节点
       */
      var Node = function (element) {
        this.element = element;
        this.next = null;
      }
      // 单向链表的长度
      var length = 0;
      // 单向链表的头节点，初始化为null
      var head = null;


      /**
       * 添加元素到链表尾部
       * 
       * @param {any} element 要传入链表的节点
       */
      this.append = function (element) {
        var node = new Node(element),
          current;

        if (head === null) {
          head = node
        } else {
          current = head;
          // 当next为null时,退出循环
          while (current.next) {
            current = current.next;
          }
          current.next = node;
        }
        length++;
      }

      /**
       * 向单向链表中某个位置插入元素
       * 
       * @param {any} position 位置
       * @param {any} element 要传入链表的节点
       */
      this.insert = function (position, element) {
        var node = new Node(element),
          current = head,
          previous,
          index = 0;
        // 验证边界
        if (position < 0 || position >= length) {
          return false;
        }
        // 在链表头部插入
        if (position === 0) {
          node.next = current;
          head = node;
        } else {
          // 在链表除头部之外的地方插入（中间 or 末尾）
          while (index++ < position) {
            previous = current;
            current = current.next;
          }
          // 在前一个节点和当前节点中间插入
          previous.next = node;
          node.next = current;
        }
        length++;
        return true;
      }


      /**
       * 寻找某个元素在单向链表中的位置
       * 
       * @param {any} element 要寻找的节点
       * @returns {Number} 返回值>=0则代表找到相应位置
       */
      this.indexOf = function (element) {
        var index = 0,
          current = head;

        while (current) {
          if (element === current.element) {
            return index
          }
          index++;
          current = current.next;
        }
        // 如果链表中不存该元素，返回-1
        return -1;
      }

      /**
       * 移除单向链表中某个位置的元素
       * 
       * @param {any} position 要移除的位置
       */
      this.removeAt = function (position) {
        var index = 0,
          previous,
          current = head;
        if (position < 0 || position >= length) {
          return null;
        }

        if (position === 0) {
          head = head.next;
        } else {
          while (index++ < position) {
            previous = current;
            current = current.next;
          }
          previous.next = current.next;
        }
        length--;
        return current.element;
      }

      /**
       * 移除给定的元素
       * 
       * @param {any} element 要移除的节点
       * @returns 
       */
      this.remove = function (element) {
        var index = this.indexOf(element);
        return this.removeAt(index)
      }

      /**
       * 获取单向链表的头部
       * 
       */
      this.getHead = function () {
        return head.element
      }

      /**
       * 检查单向链表是否为空
       * 
       * @returns 为空则返回true
       */
      this.isEmpty = function () {
        return length === 0
      }

      /**
       * 返回单向链表长度
       * 
       * @returns {Number}
       */
      this.size = function () {
        return length;
      }

      /**
       *  将链表所有内容以字符串输出
       * 
       * @returns {String}
       */
      this.toString = function () {
        var str = '',
          current = head;
        while (current) {
          str += current.element;
          current = current.next;
        }
        return str;
      }
    }

    const list2 = new LinkedList();
    list2.append(1)
    list2.append(10)
    list2.append(10)
    list2.append(10)
    list2.append(10)
    list2.append(10)
    list2.append(10)
    console.log(list2.getHead())
    console.log(list2.toString())
    console.log(list2.size())
    console.log(list2.isEmpty())
    console.log(list2.remove(10))
    console.log(list2.removeAt(3))
    console.log(list2.indexOf(100))
    console.log(list2.insert(2, 'aaa'))
  </script>
</body>

</html>